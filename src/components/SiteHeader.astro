---
export interface Props {
  baseUrl?: string
}
const { baseUrl = '' } = Astro.props as Props

const navLinks = [
  { label: 'HOME', href: '#top' },
  { label: 'INTRO', href: '#intro' },
  { label: 'EXPERIENCE', href: '#experience' },
  { label: 'PHILOSOPHY', href: '#philosophy' },
  { label: 'STANCE', href: '#stance' },
  { label: 'WORKS', href: '#works' },
  { label: 'ARTICLES', href: '#articles' },
  { label: 'CONTACT', href: '#contact' },
]
---
<header class="fixed inset-x-0 top-0 w-full z-50 border-b border-slate-200 overflow-hidden" data-component="site-header">
  <div class="absolute inset-0 bg-white/90 backdrop-blur-sm pointer-events-none"></div>
  <div class="max-w-7xl mx-auto relative z-10">
    <div class="flex items-center justify-between px-4 h-16">
      <div class="flex items-center">
        <a href={`${baseUrl}/`} class="flex items-center h-10 p-2 -mb-1">
          <img src="/assets/images/logo_black.svg" alt="meg+gumi" class="h-full w-auto" loading="lazy" decoding="async" />
        </a>
      </div>
      <nav class="hidden lg:flex space-x-8">
        {navLinks.map((nav) => (
          <a href={`${baseUrl}/${nav.href}`} class="text-slate-500 hover:text-slate-700 transition-colors relative inline-block group">
            {nav.label}
            <span
              class="absolute bottom-0 left-0 w-full h-0.5 bg-slate-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-right"></span>
          </a>
        ))}
      </nav>
      <button class="lg:hidden" id="mobile-menu-toggle">
        <i class="fas fa-bars text-slate-500 transition-transform duration-300" id="mobile-menu-icon"></i>
      </button>
    </div>
    <div class="hidden lg:hidden border-t border-slate-200 relative z-60 px-4 py-3" id="mobile-menu">
      <nav class="flex flex-col divide-y divide-slate-200">
        {navLinks.map((nav) => (
          <a
            href={`${baseUrl}/${nav.href}`}
            class="block px-6 py-4 text-slate-500 hover:text-slate-700 hover:bg-slate-50 transition-colors relative group">
            {nav.label}
          </a>
        ))}
      </nav>
    </div>
  </div>
</header>

<script>
  const toggle = document.getElementById('mobile-menu-toggle')
  const icon = document.getElementById('mobile-menu-icon')
  const menu = document.getElementById('mobile-menu')
  let open = false
  const setOpen = (val) => {
    open = val
    if (open) {
      menu.classList.remove('hidden')
      icon.className = 'fas fa-times text-slate-500 transition-transform duration-300'
      document.body.style.overflow = 'hidden'
    } else {
      menu.classList.add('hidden')
      icon.className = 'fas fa-bars text-slate-500 transition-transform duration-300'
      document.body.style.overflow = ''
    }
  }
  toggle?.addEventListener('click', () => setOpen(!open))
  menu?.querySelectorAll('a')?.forEach(a => a.addEventListener('click', () => setOpen(false)))
</script>
